import{a as Oe}from"./firebase-config-DVCrEPzz.js";import"https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";import"https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";const B=[{id:1,title:"श्रीमद् भगवद्गीता",category:"TA",dir:"001-sbg",desc:"-तः करोतु अन्वेषणम्  । <br> Find words jumbled up from any verse (shlokaH) of <pre>shriimad bhagavadgiitaa </pre>"},{id:2,title:"शिलाखण्डः , पत्रम् , कर्तरी",category:"RG",dir:"002-zpk",desc:"क्रीडतु । <br> Play Rock,Paper,Scissors - <pre>shilaakhaNDaH , patram , kartarii</pre> "},{id:3,title:"सोपानसर्पाः च",category:"ET",dir:"003-ssc",desc:"क्रीडतु ।<br> Play Ladders & Snakes game and learn with fun - <pre>sopaanasarpaaH cha</pre>"},{id:4,title:"सुडोकू ",category:"RG",dir:"004-sis",desc:"क्रीडतु । <br> Challenge yourself to a Sudoku in <pre>saMskRRitam</pre>"},{id:5,title:"द्वन्द्वयुद्धम् ",category:"RG",dir:"005-dy",desc:"क्रीडतु । <br> Shall we call Tic-Tac-Toe in Sanskrit as <pre>dvandvayuddham ? :)</pre>"},{id:6,title:"नाम किम्? ",category:"TA",dir:"006-nk",desc:"!? <br> Generate randomly (funny?) English-Sanskrit nick-<pre>naama</pre>"},{id:7,title:"श्रीकृष्णस्य वा अर्जुनस्य",category:"TA",dir:"007-ask",desc:" नामपदान्वेषणम्  । <br> Find words jumbled up from names of Shri Krishna or Arjuna from <pre>shriimad bhagavadgiitaa </pre>"},{id:8,title:"संस्कृतम्  Minesweeper",category:"RG",dir:"008-mss",desc:" क्रीडतु । <br> Play the classic game of Minesweeper - with numerals in <pre>saMskRRitam </pre>"},{id:9,title:"Memory क्रीडा ",category:"RG",dir:"009-mmk",desc:" क्रीडतु । <br> Play the classic game of Matching/Memory - with so more options coming soon"},{id:10,title:"राशयः  ",category:"RG",dir:"010-sw",desc:" Fun with राशिः । <br> Learning will happen too !"},{id:11,title:"मासाः ",category:"RG",dir:"011-m",desc:" Fun with मासाः । <br> Indian months !"},{id:12,title:"सूर्यनमस्कारः  ",category:"RG",dir:"012-sn",desc:" Salute the Sun ! <br> सूर्यः <pre>suuryaH</pre>"},{id:13,title:"सङ्ख्या matching",category:"RG",dir:"013-mts",desc:" Match the सङ्ख्या ! (numbers in संस्कृतम् ) <br> <pre>sa~Nkhyaa</pre>"},{id:14,title:"सङ्ख्या typer",category:"RG",dir:"014-st",desc:" Type the सङ्ख्या  (number) <br> before it hits the center and you lose a 'life' !"},{id:15,title:"२०४८",category:"RG",dir:"015-2048",desc:" २०४८ क्रीडतु <br> 2048"},{id:16,title:"समस्या ",category:"RG",dir:"016-ss",desc:" [samasyaa = puzzle]"},{id:17,title:"रचयतु ",category:"RG",dir:"017-byo",desc:" Create by mixing/matching :)"},{id:18,title:"Arrange सुभाषितम्  ",category:"RG",dir:"018-as",desc:" Order the words of a सुभाषितम्  in correct sequence! <pre>subhaaShitam</pre>"},{id:19,title:"चित्र-समस्या ",category:"RG",dir:"019-cs",desc:" Jigsaw puzzle for a <pre>chitram</pre>"},{id:21,title:"अन्वेषणम् ",category:"RG",dir:"021-a",desc:" 'Finding Waldo'-style fun!?<pre>anveShaNam </pre>"},{id:22,title:"पाशः",category:"RG",dir:"022-p",desc:" <pre>paashaH/jaalam </pre> means net/trap/maze"},{id:24,title:"सङ्क्षेपरामायणम्  ",category:"RG",dir:"024-sr",desc:"-तः करोतु अन्वेषणम् । <br> Find words jumbled up from any verse (shlokaH) of <pre>sa~NkSheparaamaayaNam </pre>"},{id:25,title:"Arrange श्लोकः",category:"RG",dir:"025-sr",desc:"from <pre>सङ्क्षेपरामायणम्  sa~NkSheparaamaayaNam</pre>"},{id:26,title:"स्वराः-painting",category:"RG",dir:"026-sp",desc:"learn to write <pre>स्वराः  svaraaH</pre>"},{id:27,title:"१५ समस्या",category:"RG",dir:"027-15s",desc:"play the classic 15-puzzle <pre>समस्या samasyaa</pre>"},{id:31,title:"Flash",category:"ET",dir:"031-flash",desc:"Flash cards for learning Sanskrit: alphabet, common phrases, sentences, and more..."},{id:32,title:"पदरञ्जिनी - padara~njinii",category:"सम्भाषणसन्देशः",dir:"pr",desc:"Crosswords (in संस्कृतम् )  from monthly magazine सम्भाषणसन्देशः"},{id:33,title:"अन्विष्यन्तां पदानि anviShyantaaM padaani",category:"सम्भाषणसन्देशः",dir:"033-ap",desc:"Word Search (in संस्कृतम् )  from monthly magazine सम्भाषणसन्देशः"},{id:34,title:"श्री-विष्णुसहस्रनाम",category:"Telegram",dir:"https://t.me/visnu1k",desc:"search names of shrii Vishnu (in संस्कृतम् )  from 1000 in Telegram channel"},{id:35,title:"निकषोपलः ",category:"Telegram",dir:"https://t.me/nikaSopalaH",desc:"nikaSopalaH (quiz) from monthly magazine सम्भाषणसन्देशः on Telegram channel"},{id:36,title:"कथाः - प्रश्नावली ",category:"Telegram",dir:"https://t.me/kathaaH",desc:"Q and A quiz based on kathaaH from monthly magazine सम्भाषणसन्देशः on Telegram channel"},{id:37,title:"Simple संस्कृतम्  transliterator",category:"TA",dir:"037-sst",desc:"SST for quick and easy back and forth transliteration"},{id:38,title:"संस्कृतम्  Bingo",category:"TA",dir:"038-bingo",desc:"helper"},{id:40,title:"संस्कृतम्  analog clock",category:"TA",dir:"040-ks",desc:"कः समयः ? kaH samayaH"},{id:41,title:"श्रीमद्भगवद्गीता  in a year!",category:"TA",dir:"041-giy",desc:"श्रीमद्भगवद्गीता  <pre>shriimad-bhagavad-giitaa</pre> in 2024!"},{id:42,title:"संस्कृतम् Rocks!",category:"TA",dir:"042-sr",desc:"<pre>संस्कृतम्  (saMskRRitam)</pre> Rocks! <br>Simple sentences you can use for self-introduction"},{id:43,title:" T-rex in संस्कृतम् ",category:"RG",dir:"043-trs",desc:"Chrome Easter Egg - T-rex runner with संस्कृतम्  scores :) "},{id:44,title:" गणितपरीक्षा ",category:"RG",dir:"044-gp",desc:"MathBattle in संस्कृतम्  :) "},{id:45,title:" A game ",category:"RG",dir:"045-nss",desc:"in संस्कृतम्  :) "},{id:46,title:"गगननौका game ",category:"RG",dir:"046-ds",desc:"in संस्कृतम्  :) "},{id:47,title:"सर्पलीला game ",category:"RG",dir:"047-sl",desc:"Classic Snake Game in संस्कृतम्  :) "},{id:48,title:"Free Smash game ",category:"RG",dir:"048-fs",desc:"Free Smash game in संस्कृतम्: <pre>Prince Chauhan</pre> "},{id:49,title:"श्लोकार्थ संग्रह",category:"TA",dir:"049-sas",desc:"श्रीमद्-भगवद्गीता-श्लोकसंग्रह: Collection of Shlokas from श्रीमद् भगवद्गीता "},{id:50,title:"Auto श्लोकपाठक:",category:"TA",dir:"050-asp",desc:"Auto Reader for Shloka from श्रीमद् भगवद्गीता "},{id:51,title:"Wordle with numbers",category:"ET",dir:"051-numerale",desc:"Wordle game with devanagari numerals "},{id:52,title:"Verb Conjugations",category:"ET",dir:"052-lakaara",desc:"Sorting puzzle on sanskrit verb conjugations "},{id:53,title:"Noun declensions",category:"ET",dir:"053-shabd",desc:"Sorting puzzle on sanskrit noun declensions "},{id:54,title:"Maheshwarani sutrani",category:"ET",dir:"054-shiva-sutra",desc:"Sliding puzzle on Shiva sutras or Maheshwarani sutrani "},{id:55,title:"Namavali",category:"RG",dir:"055-namavali",desc:"Connections style game on hindu deities names"},{id:56,title:"Panchang",category:"RG",dir:"056-panchang",desc:"Jigsaw puzzle based on daily Panchang"},{id:57,title:"Gita Typing Game",category:"RG",dir:"057-gita-typing",desc:"Practice typing on English (Harvard-Kyoto) transliteration of the shlokas from Bhagavad Gita"},{id:28,title:"शीघ्रम् आगमिष्यति ...",category:"TA",dir:"999-cs",desc:"Many more fun stuff coming soon - <pre>shiighram aagamiShyati... </pre> "},{id:29,title:"Connect the Dots",category:"RG",dir:"999-cs",desc:"coming soon - <pre>shiighram aagamiShyati... </pre>"},{id:30,title:"Paint by सङ्ख्या ",category:"ET",dir:"999-cs",desc:"Paint by sa~Nkhyaa coming soon - <pre>shiighram aagamiShyati... </pre>"},{id:31,title:"vishwa संस्कृतम्  ",category:"ET",dir:"bp26",desc:"BodhaPlay संस्कृतम् competition 2026 coming soon - <pre>shiighram aagamiShyati... </pre>"}],st=document.querySelector(".section-center"),ue=document.querySelector(".btn-container");window.addEventListener("DOMContentLoaded",function(){Z(B),at()});function Z(t){let e=t.map(function(r){return`<article class="menu-item">
          <img src=${r.dir}/cover.jpg alt="${r.title}" class="photo" />
          <div class="item-info">
            <header>
              <a href=${r.dir}/ target="zat.am">${r.title}</a>
              <h4 class="price">${r.category}</h4>
            </header>
            <p class="item-text">
              ${r.desc}
            </p>
          </div>
        </article>`});e=e.join(""),st.innerHTML=e}function at(){const e=B.reduce(function(n,i){return n.includes(i.category)||n.push(i.category),n},["all"]).map(function(n){return`<button type="button" class="filter-btn" data-id=${n}>
          ${n}
        </button>`}).join("");ue.innerHTML=e,ue.querySelectorAll(".filter-btn").forEach(function(n){n.addEventListener("click",function(i){const s=i.currentTarget.dataset.id,a=B.filter(function(c){if(c.category===s)return c});Z(s==="all"?B:a)})})}const ot=()=>{};var fe={};const Le=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},ct=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],c=t[r++],o=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,o=i+2<t.length,d=o?t[i+2]:0,u=s>>2,f=(s&3)<<4|c>>4;let p=(c&15)<<2|d>>6,I=d&63;o||(I=64,a||(p=64)),n.push(r[u],r[f],r[p],r[I])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Le(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ct(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||f==null)throw new dt;const p=s<<2|c>>4;if(n.push(p),d!==64){const I=c<<4&240|d>>2;if(n.push(I),f!==64){const C=d<<6&192|f;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lt=function(t){const e=Le(t);return Me.encodeByteArray(e,!0)},Ue=function(t){return lt(t).replace(/\./g,"")},Be=function(t){try{return Me.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ut=()=>ht().__FIREBASE_DEFAULTS__,ft=()=>{if(typeof process>"u"||typeof fe>"u")return;const t=fe.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pt=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Be(t[1]);return e&&JSON.parse(e)},gt=()=>{try{return ot()||ut()||ft()||pt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mt=t=>gt()?.[`_${t}`];function Fe(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function m(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function _t(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bt(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function It(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wt(){try{return typeof indexedDB=="object"}catch{return!1}}function Et(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}const St="FirebaseError";class E extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=St,Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Tt(s,n):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new E(i,c,n)}}function Tt(t,e){return t.replace(vt,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const vt=/\{\$([^}]+)}/g;function xe(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function At(t,e){const r=new Ct(t,e);return r.subscribe.bind(r)}class Ct{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");kt(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=j),i.error===void 0&&(i.error=j),i.complete===void 0&&(i.complete=j);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kt(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function j(){}function A(t){return t&&t._delegate?t._delegate:t}class P{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}var h;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(h||(h={}));const Rt={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},Nt=h.INFO,Pt={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},Dt=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Pt[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class He{constructor(e){this.name=e,this._logLevel=Nt,this._logHandler=Dt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in h))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...e),this._logHandler(this,h.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...e),this._logHandler(this,h.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,h.INFO,...e),this._logHandler(this,h.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,h.WARN,...e),this._logHandler(this,h.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...e),this._logHandler(this,h.ERROR,...e)}}const Ot=(t,e)=>e.some(r=>t instanceof r);let pe,ge;function Lt(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mt(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $e=new WeakMap,ee=new WeakMap,Ve=new WeakMap,K=new WeakMap,ae=new WeakMap;function Ut(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(b(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&$e.set(r,t)}).catch(()=>{}),ae.set(e,t),e}function Bt(t){if(ee.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});ee.set(t,e)}let te={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ee.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ve.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return b(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ft(t){te=t(te)}function xt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(J(this),e,...r);return Ve.set(n,e.sort?e.sort():[e]),b(n)}:Mt().includes(t)?function(...e){return t.apply(J(this),e),b($e.get(this))}:function(...e){return b(t.apply(J(this),e))}}function Ht(t){return typeof t=="function"?xt(t):(t instanceof IDBTransaction&&Bt(t),Ot(t,Lt())?new Proxy(t,te):t)}function b(t){if(t instanceof IDBRequest)return Ut(t);if(K.has(t))return K.get(t);const e=Ht(t);return e!==t&&(K.set(t,e),ae.set(e,t)),e}const J=t=>ae.get(t);function $t(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=b(a);return n&&a.addEventListener("upgradeneeded",o=>{n(b(a.result),o.oldVersion,o.newVersion,b(a.transaction),o)}),r&&a.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),c.then(o=>{s&&o.addEventListener("close",()=>s()),i&&o.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Vt=["get","getKey","getAll","getAllKeys","count"],Gt=["put","add","delete","clear"],q=new Map;function me(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(q.get(e))return q.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Gt.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Vt.includes(r)))return;const s=async function(a,...c){const o=this.transaction(a,i?"readwrite":"readonly");let d=o.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),i&&o.done]))[0]};return q.set(e,s),s}Ft(t=>({...t,get:(e,r,n)=>me(e,r)||t.get(e,r,n),has:(e,r)=>!!me(e,r)||t.has(e,r)}));class zt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Wt(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Wt(t){return t.getComponent()?.type==="VERSION"}const re="@firebase/app",ye="0.14.6";const y=new He("@firebase/app"),jt="@firebase/app-compat",Kt="@firebase/analytics-compat",Jt="@firebase/analytics",qt="@firebase/app-check-compat",Xt="@firebase/app-check",Yt="@firebase/auth",Qt="@firebase/auth-compat",Zt="@firebase/database",er="@firebase/data-connect",tr="@firebase/database-compat",rr="@firebase/functions",nr="@firebase/functions-compat",ir="@firebase/installations",sr="@firebase/installations-compat",ar="@firebase/messaging",or="@firebase/messaging-compat",cr="@firebase/performance",dr="@firebase/performance-compat",lr="@firebase/remote-config",hr="@firebase/remote-config-compat",ur="@firebase/storage",fr="@firebase/storage-compat",pr="@firebase/firestore",gr="@firebase/ai",mr="@firebase/firestore-compat",yr="firebase",_r="12.6.0",br={[re]:"fire-core",[jt]:"fire-core-compat",[Jt]:"fire-analytics",[Kt]:"fire-analytics-compat",[Xt]:"fire-app-check",[qt]:"fire-app-check-compat",[Yt]:"fire-auth",[Qt]:"fire-auth-compat",[Zt]:"fire-rtdb",[er]:"fire-data-connect",[tr]:"fire-rtdb-compat",[rr]:"fire-fn",[nr]:"fire-fn-compat",[ir]:"fire-iid",[sr]:"fire-iid-compat",[ar]:"fire-fcm",[or]:"fire-fcm-compat",[cr]:"fire-perf",[dr]:"fire-perf-compat",[lr]:"fire-rc",[hr]:"fire-rc-compat",[ur]:"fire-gcs",[fr]:"fire-gcs-compat",[pr]:"fire-fst",[mr]:"fire-fst-compat",[gr]:"fire-vertex","fire-js":"fire-js",[yr]:"fire-js-all"};const Ir=new Map,wr=new Map,_e=new Map;function be(t,e){try{t.container.addComponent(e)}catch(r){y.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function D(t){const e=t.name;if(_e.has(e))return y.debug(`There were multiple attempts to register component ${e}.`),!1;_e.set(e,t);for(const r of Ir.values())be(r,t);for(const r of wr.values())be(r,t);return!0}function S(t){return t==null?!1:t.settings!==void 0}const Er={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oe=new L("app","Firebase",Er);const ce=_r;function k(t,e,r){let n=br[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),y.warn(a.join(" "));return}D(new P(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const Sr="firebase-heartbeat-database",Tr=1,O="firebase-heartbeat-store";let X=null;function Ge(){return X||(X=$t(Sr,Tr,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(O)}catch(r){console.warn(r)}}}}).catch(t=>{throw oe.create("idb-open",{originalErrorMessage:t.message})})),X}async function vr(t){try{const r=(await Ge()).transaction(O),n=await r.objectStore(O).get(ze(t));return await r.done,n}catch(e){if(e instanceof E)y.warn(e.message);else{const r=oe.create("idb-get",{originalErrorMessage:e?.message});y.warn(r.message)}}}async function Ie(t,e){try{const n=(await Ge()).transaction(O,"readwrite");await n.objectStore(O).put(e,ze(t)),await n.done}catch(r){if(r instanceof E)y.warn(r.message);else{const n=oe.create("idb-set",{originalErrorMessage:r?.message});y.warn(n.message)}}}function ze(t){return`${t.name}!${t.options.appId}`}const Ar=1024,Cr=30;class kr{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Nr(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=we();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>Cr){const i=Pr(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){y.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=we(),{heartbeatsToSend:r,unsentEntries:n}=Rr(this._heartbeatsCache.heartbeats),i=Ue(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return y.warn(e),""}}}function we(){return new Date().toISOString().substring(0,10)}function Rr(t,e=Ar){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ee(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Ee(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Nr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wt()?Et().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vr(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ie(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ie(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Ee(t){return Ue(JSON.stringify({version:2,heartbeats:t})).length}function Pr(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}function Dr(t){D(new P("platform-logger",e=>new zt(e),"PRIVATE")),D(new P("heartbeat",e=>new kr(e),"PRIVATE")),k(re,ye,t),k(re,ye,"esm2020"),k("fire-js","")}Dr("");function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Or=We,je=new L("auth","Firebase",We());const H=new He("@firebase/auth");function Lr(t,...e){H.logLevel<=h.WARN&&H.warn(`Auth (${ce}): ${t}`,...e)}function F(t,...e){H.logLevel<=h.ERROR&&H.error(`Auth (${ce}): ${t}`,...e)}function Se(t,...e){throw de(t,...e)}function Ke(t,...e){return de(t,...e)}function Je(t,e,r){const n={...Or(),[e]:r};return new L("auth","Firebase",n).create(e,{appName:t.name})}function x(t){return Je(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function de(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return je.create(t,...e)}function l(t,e,...r){if(!t)throw de(e,...r)}function R(t){const e="INTERNAL ASSERTION FAILED: "+t;throw F(e),new Error(e)}function $(t,e){t||R(e)}function Mr(){return Te()==="http:"||Te()==="https:"}function Te(){return typeof self<"u"&&self.location?.protocol||null}function Ur(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mr()||bt()||"connection"in navigator)?navigator.onLine:!0}function Br(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class M{constructor(e,r){this.shortDelay=e,this.longDelay=r,$(r>e,"Short delay should be less than long delay!"),this.isMobile=yt()||It()}get(){return Ur()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fr(t,e){$(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}class qe{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;R("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;R("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;R("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Hr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$r=new M(3e4,6e4);function Xe(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function z(t,e,r,n,i={}){return Ye(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const c=xe({key:t.config.apiKey,...a}).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:o,...s};return _t()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Fe(t.emulatorConfig.host)&&(d.credentials="include"),qe.fetch()(await Qe(t,t.config.apiHost,r,c),d)})}async function Ye(t,e,r){t._canInitEmulator=!1;const n={...xr,...e};try{const i=new Vr(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw U(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[o,d]=c.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw U(t,"credential-already-in-use",a);if(o==="EMAIL_EXISTS")throw U(t,"email-already-in-use",a);if(o==="USER_DISABLED")throw U(t,"user-disabled",a);const u=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Je(t,u,d);Se(t,u)}}catch(i){if(i instanceof E)throw i;Se(t,"network-request-failed",{message:String(i)})}}async function Qe(t,e,r,n){const i=`${e}${r}?${n}`,s=t,a=s.config.emulator?Fr(t.config,i):`${t.config.apiScheme}://${i}`;return Hr.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class Vr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ke(this.auth,"network-request-failed")),$r.get())})}}function U(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Ke(t,e,n);return i.customData._tokenResponse=r,i}async function Gr(t,e){return z(t,"POST","/v1/accounts:delete",e)}async function V(t,e){return z(t,"POST","/v1/accounts:lookup",e)}function N(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zr(t,e=!1){const r=A(t),n=await r.getIdToken(e),i=Ze(n);l(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:N(Y(i.auth_time)),issuedAtTime:N(Y(i.iat)),expirationTime:N(Y(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Y(t){return Number(t)*1e3}function Ze(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return F("JWT malformed, contained fewer than 3 sections"),null;try{const i=Be(r);return i?JSON.parse(i):(F("Failed to decode base64 JWT payload"),null)}catch(i){return F("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ve(t){const e=Ze(t);return l(e,"internal-error"),l(typeof e.exp<"u","internal-error"),l(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ne(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof E&&Wr(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Wr({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class jr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ie{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=N(this.lastLoginAt),this.creationTime=N(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function G(t){const e=t.auth,r=await t.getIdToken(),n=await ne(t,V(e,{idToken:r}));l(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?et(i.providerUserInfo):[],a=Jr(t.providerData,s),c=t.isAnonymous,o=!(t.email&&i.passwordHash)&&!a?.length,d=c?o:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ie(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,u)}async function Kr(t){const e=A(t);await G(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jr(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function et(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}async function qr(t,e){const r=await Ye(t,{},async()=>{const n=xe({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await Qe(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:c,body:n};return t.emulatorConfig&&Fe(t.emulatorConfig.host)&&(o.credentials="include"),qe.fetch()(a,o)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Xr(t,e){return z(t,"POST","/v2/accounts:revokeToken",Xe(t,e))}class T{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){l(e.idToken,"internal-error"),l(typeof e.idToken<"u","internal-error"),l(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ve(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){l(e.length!==0,"internal-error");const r=ve(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(l(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await qr(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new T;return n&&(l(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(l(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(l(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new T,this.toJSON())}_performRefresh(){return R("not implemented")}}function _(t,e){l(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class g{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ie(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await ne(this,this.stsTokenManager.getToken(this.auth,e));return l(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return zr(this,e)}reload(){return Kr(this)}_assign(e){this!==e&&(l(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new g({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){l(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await G(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(S(this.auth.app))return Promise.reject(x(this.auth));const e=await this.getIdToken();return await ne(this,Gr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,s=r.phoneNumber??void 0,a=r.photoURL??void 0,c=r.tenantId??void 0,o=r._redirectEventId??void 0,d=r.createdAt??void 0,u=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:I,providerData:C,stsTokenManager:he}=r;l(f&&he,e,"internal-error");const nt=T.fromJSON(this.name,he);l(typeof f=="string",e,"internal-error"),_(n,e.name),_(i,e.name),l(typeof p=="boolean",e,"internal-error"),l(typeof I=="boolean",e,"internal-error"),_(s,e.name),_(a,e.name),_(c,e.name),_(o,e.name),_(d,e.name),_(u,e.name);const W=new g({uid:f,auth:e,email:i,emailVerified:p,displayName:n,isAnonymous:I,photoURL:a,phoneNumber:s,tenantId:c,stsTokenManager:nt,createdAt:d,lastLoginAt:u});return C&&Array.isArray(C)&&(W.providerData=C.map(it=>({...it}))),o&&(W._redirectEventId=o),W}static async _fromIdTokenResponse(e,r,n=!1){const i=new T;i.updateFromServerResponse(r);const s=new g({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await G(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];l(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?et(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new T;c.updateFromIdToken(n);const o=new g({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ie(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(o,d),o}}const Ae=new Map;function w(t){$(t instanceof Function,"Expected a class definition");let e=Ae.get(t);return e?($(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ae.set(t,e),e)}class tt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}tt.type="NONE";const Ce=tt;function Q(t,e,r){return`firebase:${t}:${e}:${r}`}class v{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Q(this.userKey,i.apiKey,s),this.fullPersistenceKey=Q("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await V(this.auth,{idToken:e}).catch(()=>{});return r?g._fromGetAccountInfoResponse(this.auth,r,e):null}return g._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new v(w(Ce),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||w(Ce);const a=Q(n,e.config.apiKey,e.name);let c=null;for(const d of r)try{const u=await d._get(a);if(u){let f;if(typeof u=="string"){const p=await V(e,{idToken:u}).catch(()=>{});if(!p)break;f=await g._fromGetAccountInfoResponse(e,p,u)}else f=g._fromJSON(e,u);d!==s&&(c=f),s=d;break}}catch{}const o=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new v(s,e,n):(s=o[0],c&&await s._set(a,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new v(s,e,n))}}function ke(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(en(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yr(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rn(e))return"Blackberry";if(nn(e))return"Webos";if(Qr(e))return"Safari";if((e.includes("chrome/")||Zr(e))&&!e.includes("edge/"))return"Chrome";if(tn(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function Yr(t=m()){return/firefox\//i.test(t)}function Qr(t=m()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zr(t=m()){return/crios\//i.test(t)}function en(t=m()){return/iemobile/i.test(t)}function tn(t=m()){return/android/i.test(t)}function rn(t=m()){return/blackberry/i.test(t)}function nn(t=m()){return/webos/i.test(t)}function rt(t,e=[]){let r;switch(t){case"Browser":r=ke(m());break;case"Worker":r=`${ke(m())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ce}/${n}`}class sn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,c)=>{try{const o=e(s);a(o)}catch(o){c(o)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function an(t,e={}){return z(t,"GET","/v2/passwordPolicy",Xe(t,e))}const on=6;class cn{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??on,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class dn{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Re(this),this.idTokenSubscription=new Re(this),this.beforeStateQueue=new sn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=w(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await v.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await V(this,{idToken:e}),n=await g._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(S(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=n?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return l(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await G(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Br()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(S(this.app))return Promise.reject(x(this));const r=e?A(e):null;return r&&l(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&l(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return S(this.app)?Promise.reject(x(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return S(this.app)?Promise.reject(x(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(w(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await an(this),r=new cn(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new L("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Xr(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&w(e)||this._popupRedirectResolver;l(r,this,"argument-error"),this.redirectPersistenceManager=await v.create(this,[w(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(l(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,i);return()=>{a=!0,o()}}else{const o=e.addObserver(r);return()=>{a=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return l(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(S(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Lr(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ln(t){return A(t)}class Re{constructor(e){this.auth=e,this.observer=null,this.addObserver=At(r=>this.observer=r)}get next(){return l(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hn(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(w);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function un(t,e,r,n){return A(t).onAuthStateChanged(e,r,n)}function fn(t){return A(t).signOut()}new M(3e4,6e4);new M(2e3,1e4);new M(3e4,6e4);new M(5e3,15e3);var Ne="@firebase/auth",Pe="1.12.0";class pn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){l(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gn(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mn(t){D(new P("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=n.options;l(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(t)},d=new dn(n,i,s,o);return hn(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),D(new P("auth-internal",e=>{const r=ln(e.getProvider("auth").getImmediate());return(n=>new pn(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),k(Ne,Pe,gn(t)),k(Ne,Pe,"esm2020")}const yn=300;mt("authIdTokenMaxAge");mn("Browser");const De=document.getElementById("logged-out"),se=document.getElementById("logged-in"),_n=document.getElementById("profile-btn"),le=document.getElementById("profile-dropdown"),bn=document.getElementById("user-email-dropdown"),In=document.getElementById("username"),wn=document.getElementById("dropdown-logout");un(Oe,t=>{if(t){De.classList.add("hidden"),se.classList.remove("hidden"),bn.textContent=t.email;let e;t.displayName?e=t.displayName.split(" ")[0]:e=t.email.split("@")[0],In.textContent=`Hi, ${e}!`}else De.classList.remove("hidden"),se.classList.add("hidden")});_n.addEventListener("click",()=>{le.classList.toggle("hidden")});document.addEventListener("click",t=>{se.contains(t.target)||le.classList.add("hidden")});wn.addEventListener("click",async t=>{t.preventDefault();try{await fn(Oe),le.classList.add("hidden"),alert("Logged out successfully!")}catch(e){alert("Error logging out"),console.error(e)}});
