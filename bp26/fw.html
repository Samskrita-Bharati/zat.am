<!DOCTYPE html>
<html>

<head>

  <!-- NOTE THIS DOES NOT WORK WITH .htm ONLY .html -->
  <title>‡§Ö‡§®‡•ç‡§µ‡•á‡§∑‡§£‡§Æ‡•ç</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <link rel="stylesheet" href="css/find.css" />
  <script type="text/javascript" src="https://unpkg.com/papaparse@latest/papaparse.min.js"></script>

  <style>
    .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc; transition: .4s; }
    .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px;
      background-color: white; transition: .4s; }
    input:checked+.slider { background-color: #2196F3; }
    input:focus+.slider { box-shadow: 0 0 1px #2196F3; }
    input:checked+.slider:before { transform: translateX(26px); }
    .slider.round { border-radius: 34px; }
    .slider.round:before { border-radius: 50%; }

    /* ‚úÖ Celebration UI (inline) */
    #bp26CelebrateOverlay{
      position: fixed; inset: 0;
      display:none; align-items:center; justify-content:center;
      background: rgba(0,0,0,0.35);
      z-index: 10000;
      padding: 20px;
      border: none;
    }
    .bp26CelebrateBox{
      position: relative;
      width: min(460px, 92vw);
      background: #fff;
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.25);
      text-align: center;
      font-family: system-ui, Arial, sans-serif;
      border: 1px solid #eee;
    }
    .bp26Sparkles{
      font-size: 54px;
      line-height: 1.1;
      margin: 8px 0 6px;
      animation: bp26Pop 600ms ease-out both;
    }
    @keyframes bp26Pop{
      0%{ transform: scale(0.6); opacity: 0; }
      100%{ transform: scale(1); opacity: 1; }
    }
    .bp26Btn{
      margin-top: 12px; padding: 10px 14px;
      border-radius: 12px; border: 1px solid #ddd;
      background: #f9fafb; cursor: pointer;
    }
    .bp26Confetti{
      position: fixed;
      top: -12px;
      width: 10px; height: 10px;
      border-radius: 3px;
      z-index: 10001;
      opacity: .95;
      animation: bp26Fall 950ms linear forwards;
      pointer-events: none;
    }
    @keyframes bp26Fall{
      to{ transform: translateY(110vh) rotate(540deg); opacity: 0.9; }
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/@sanskrit-coders/sanscript@1.1.0/sanscript.min.js"></script>
</head>

<body>
  <div id="lead">
    ‡§Ö‡§∏‡•ç‡§Æ‡§ø‡§®‡•ç ‡§Ö‡§ï‡•ç‡§∑‡§∞‡§∏‡§Æ‡•Ç‡§π‡•á ‡§Ö‡§¶‡•ç‡§Ø‡§§‡§®-‡§ï‡§•‡§æ-‡§§‡§É ‡§™‡§¶‡§æ‡§®‡§ø ‡§∏‡§®‡•ç‡§§‡§ø ‡•§ ‡§ï‡§§‡§ø ?
    <span style="font-weight:bold" id="nPresent">‡•´</span> ‡•§
    ‡§ï‡§∞‡•ã‡§§‡•Å ‡§Ö‡§®‡•ç‡§µ‡•á‡§∑‡§£‡§Æ‡•ç ‡•§ <br><span id="lead2"></span>
  </div>

  <div id="statusMessage"> ‡§™‡§¶‡§æ‡§®‡§ø ‡§Ö‡§®‡•ç‡§µ‡•á‡§∑‡§ø‡§§‡§æ‡§®‡§ø</div>
  <div id="finishMessage">‡•§‡•§ ‡§∂‡•Å‡§≠‡§Æ‡§∏‡•ç‡§§‡•Å ‡•§‡•§ </div>

  <div id="gridParent">
    <div id="grid"></div>
  </div>

  <div id="level">
    <div class="leveltext">
      ‚úîÔ∏è = <span id="nFound"></span>
      <br>
      <strong>‡§ï‡§†‡§ø‡§®‡§§‡§æ</strong>
      <ul>
        <li><a href="fw.html?size=5" onclick="sV(this)">‡§∏‡§∞‡§≤‡§Æ‡•ç </a></li>
        <li><a href="fw.html?size=7" onclick="sV(this)">‡§Æ‡§ß‡•ç‡§Ø‡§Æ‡§Æ‡•ç </a></li>
        <li><a href="fw.html?size=10" onclick="sV(this)">‡§ï‡§†‡§ø‡§®‡§Æ‡•ç </a></li>
      </ul>
    </div>
  </div>

  <div id="hintLink">
    <div>
      <a onclick="showHint1()" href="#"><img src="imgs/hint.png" alt="help">‡§®‡§æ‡§Æ‡§™‡§¶‡§æ‡§®‡§ø ..</a>
      <a onclick="showHint2()" href="#"><img src="imgs/hint2.png" alt="help">.. ‡§ï‡§æ‡§®‡§ø ??? </a>
    </div>

    <div id="hintPopup" onclick="hideHint()">
      <div class="content" onclick="hideHint()">
        <ul id="answers"></ul>
      </div>
    </div>
  </div>

  <div id="refreshLink">
    <div>
      <a href="#" onclick="window.location.reload(); return false;">
        <img src="imgs/refresh.png" alt="re-do">
        <div>‡§™‡•Å‡§®‡§É</div>
      </a>
    </div>
  </div>

  <!-- ‚úÖ Celebration overlay (inline) -->
  <div id="bp26CelebrateOverlay">
    <div class="bp26CelebrateBox">
      <div class="bp26Sparkles">‚ú®üéâ‚ú®</div>
      <div id="bp26CelebrateTitle" style="font-weight:700;font-size:18px;margin-bottom:6px;">
        Submitted ‚úÖ
      </div>
      <div id="bp26CelebrateSub" style="font-size:14px;color:#374151;">
        Nice work!
      </div>
      <button id="bp26CelebrateClose" class="bp26Btn">Close</button>
    </div>
  </div>

  <script>
    /* ---------------------------
       Celebration (inline)
    --------------------------- */
    function bp26Celebrate({ title="Submitted ‚úÖ", subtitle="Nice work!", score=null } = {}) {
      const overlay = document.getElementById("bp26CelebrateOverlay");
      const t = document.getElementById("bp26CelebrateTitle");
      const s = document.getElementById("bp26CelebrateSub");

      t.textContent = title;
      s.textContent = score === null ? subtitle : `${subtitle}  Score: ${score} ‚ú®`;

      overlay.style.display = "flex";
      bp26BurstConfetti(70);

      setTimeout(() => { overlay.style.display = "none"; }, 2200);
    }

    function bp26BurstConfetti(count=60) {
      for (let i = 0; i < count; i++) {
        const c = document.createElement("div");
        c.className = "bp26Confetti";
        c.style.left = Math.random() * 100 + "vw";
        c.style.width = (6 + Math.random() * 8) + "px";
        c.style.height = (6 + Math.random() * 8) + "px";
        c.style.background = `hsl(${Math.floor(Math.random() * 360)}, 90%, 60%)`;
        c.style.transform = `translateY(0) rotate(${Math.random() * 180}deg)`;
        c.style.animationDuration = (800 + Math.random() * 600) + "ms";
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 1600);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const closeBtn = document.getElementById("bp26CelebrateClose");
      const overlay = document.getElementById("bp26CelebrateOverlay");
      if (closeBtn) closeBtn.addEventListener("click", () => overlay.style.display = "none");
      if (overlay) overlay.addEventListener("click", (e) => {
        if (e.target === overlay) overlay.style.display = "none";
      });
    });
  </script>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>

  <script>
    // ======================
    // BP26 GAME IDENTIFIERS
    // ======================
    const BP26_GAME = "bp26-Game4";
    const BP26_DAY = 4;

    // scoring settings
    // Score formula:
    // score = max(0, (wordsFound*10) - ((clicks - wordsFound)*2))

    // score computing function, commented out because it can result in a negative score
    // function computeScore(wordsTotal, clicks) {
    //   const raw = (wordsTotal * 10) - ((clicks - wordsTotal) * 2);
    //   return Math.max(0, raw);
    // }

    var wpp = 15;
    var answers = [];
    var wlist = [];
    var N_ROWS = 10;
    var N_COLS = 10;
    var nc = 0;
    var N_WORDS_TO_FIND = 5;
    var isGameFinished = false;

    const urlParams = new URLSearchParams(window.location.search);
    var data = urlParams.get('d');
    if (!data) data = "‡§Ö‡§ï‡•ç‡§∑‡§∞‡§∏‡§Æ‡•Ç‡§π‡•á ‡§Ö‡§¶‡•ç‡§Ø‡§§‡§®-‡§ï‡§•‡§æ ‡§™‡§¶‡§æ‡§®‡§ø ‡§∏‡§®‡•ç‡§§‡§ø ‡§ï‡§∞‡•ã‡§§‡•Å ‡§Ö‡§®‡•ç‡§µ‡•á‡§∑‡§£‡§Æ‡•ç";

    var wordList = Sanscript.t(data, 'iast', 'devanagari').split(" ");

    document.addEventListener('DOMContentLoaded', function () {
      var lnk = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6CFR_0gDsZl-lmwLFWmtdXMXYGVEHGJ8fvBu2_5wvbEl9L-4Yr0ugI0TFTTdvtLlMTRmLnCIJ5FBF/pub?gid=0&single=true&output=csv";
      Papa.parse(lnk, {
        download: true,
        header: true,
        complete: populateWlist
      })
    });

    function populateWlist(fildat) {
      var set = urlParams.get('set');
      if (!set || isNaN(set)) set = 0;

      fullist = fildat.data;
      if (set > fildat.data.length / wpp) set = 0;

      wlist = [];
      for (i = 0; i < wpp; i++) {
        wlist.push(fullist[(set * wpp) + i].padam);
      }
      if (wlist.length > 0) wordList = wlist;

      N_WORDS_TO_FIND = Math.min(N_WORDS_TO_FIND, wordList.length);

      var size = urlParams.get('size');
      if (size && size >= 4 && size <= 15) {
        N_ROWS = size;
        N_COLS = size;
        N_WORDS_TO_FIND = Math.min(Math.floor(size / 2), wordList.length);
      }

      var MAX_MARKER_IDX = 6;

      var main = function () {
        drawGrid();
        var nWordsPut = 0;
        do {
          var words = getWordsToFind();
          nWordsPut = putWords(words);
        } while (nWordsPut == 0);

        fillRandom();
        countAnswers();
        hideHint();
        resizeGrid();
        registerEventListeners();
      };

      var registerEventListeners = function () {
        $("#grid").on("selectstart", function () { return false; });
        $("#grid td").bind("click", cellClick);
      };

      var drawGrid = function () {
        var table = $("<table></table>");
        for (var rowIdx = 0; rowIdx < N_ROWS; rowIdx++) {
          var row = $('<tr id="tblRow_' + rowIdx + '"></tr>');
          for (var colIdx = 0; colIdx < N_COLS; colIdx++) {
            var cell = $('<td id="tblCell_' + rowIdx + "_" + colIdx + '"></td>');
            row.append(cell);
          }
          table.append(row);
        }
        $("#grid").html("").append(table);
      };

      var foundStrings = {};
      var stringToCss = {};
      var nAnswersPresent = 0;
      var nAnswersDiscovered = 0;

      var countAnswers = function () {
        answers = [];
        nAnswersPresent = 0;

        for (var rowIdx = 0; rowIdx < N_ROWS; rowIdx++) {
          for (var colIdx = 0; colIdx < N_COLS; colIdx++) {
            var matches = processCell($("#tblCell_" + rowIdx + "_" + colIdx).get(0), true);
            answers = answers.concat(matches);
            nAnswersPresent += matches.length;
          }
        }

        $("#finishMessage").hide();
        $("#nPresent").text(String.fromCharCode(0x0966 + nAnswersPresent));
        $("#nFound").text(0);

        $("#answers").html("");
        for (var i = 0; i < answers.length; i++) {
          $("#answers").append("<li>" + answers[i] + "</li>");
        }
      };

      // ‚úÖ prevent double finish
      let bp26Finished = false;

      var cellClick = async function (e) {
        console.log(isGameFinished);
        if (isGameFinished) return;

        nc++;
        var cell = $(e.target).closest("td").get(0);
        nAnswersDiscovered += processCell(cell).length;

        $("#nFound").text(String.fromCharCode(0x0966 + nAnswersDiscovered));

        if (nAnswersDiscovered == nAnswersPresent) {
          isGameFinished = true;

          // ‚úÖ submit score to Firestore (even if 0)
          let submitOk = true;
          try {
            if (window.reportScore) {
              await window.reportScore(nAnswersDiscovered);
            }
          } catch (err) {
            submitOk = false;
            console.error("Score submit failed:", err);
          }

          // ‚úÖ show celebration first (no alert/confirm to block it)
          bp26Celebrate({
            title: submitOk ? "Score Submitted ‚úÖ" : "Finished ‚úÖ",
            subtitle: submitOk ? "Great job!" : "Saved locally (Firebase not ready)",
            score: nAnswersDiscovered
          });

          $("#finishMessage").append("<br>AFTER " + nc + " clicks!");
          // alert("You found " + nAnswersPresent + " words\nAFTER " + nc + " clicks!\nScore: " + nAnswersPresent);

          // var ask = confirm("‡§™‡•Å‡§®‡§É ? Press 'ok' to play again");
          // if (ask) window.location.reload();

          $("#finishMessage").show();
          $("#statusMessage").hide();
          $("#lead").hide();
        }
      };

      var processCell = function (cell, doNotMark) {
        if ($(cell).hasClass("found")) return [];

        var cellRowIdx = parseInt(cell.id.split("_")[1]);
        var cellColIdx = parseInt(cell.id.split("_")[2]);
        var matches = [];

        // horizontal
        var matchCandidate = "";
        for (var colIdx = cellColIdx; colIdx < N_COLS; colIdx++) {
          matchCandidate += $("#tblCell_" + cellRowIdx + "_" + colIdx).text();
          if (isProperMatch(matchCandidate)) {
            matches.push(matchCandidate);
            if (!doNotMark) markMatch(cellRowIdx, cellColIdx, cellRowIdx, colIdx, matchCandidate);
          }
        }

        // vertical
        matchCandidate = "";
        for (var rowIdx = cellRowIdx; rowIdx < N_ROWS; rowIdx++) {
          matchCandidate += $("#tblCell_" + rowIdx + "_" + cellColIdx).text();
          if (convertToArrayOfAksharas(matchCandidate).length > 1 && isProperMatch(matchCandidate)) {
            matches.push(matchCandidate);
            if (!doNotMark) markMatch(cellRowIdx, cellColIdx, rowIdx, cellColIdx, matchCandidate);
          }
        }

        // diagonal
        matchCandidate = "";
        for (var diagIdx = 0; diagIdx + cellRowIdx < N_ROWS && diagIdx + cellColIdx < N_COLS; diagIdx++) {
          matchCandidate += $("#tblCell_" + (diagIdx + cellRowIdx) + "_" + (diagIdx + cellColIdx)).text();
          if (convertToArrayOfAksharas(matchCandidate).length > 1 && isProperMatch(matchCandidate)) {
            matches.push(matchCandidate);
            if (!doNotMark) markMatch(cellRowIdx, cellColIdx, diagIdx + cellRowIdx, diagIdx + cellColIdx, matchCandidate);
          }
        }

        return matches;
      };

      var markMatch = function (startRowIdx, startColIdx, endRowIdx, endColIdx, word) {
        if (!stringToCss[word]) {
          var nCssUsed = Object.keys(stringToCss).length;
          stringToCss[word] = (nCssUsed > MAX_MARKER_IDX) ? "markerX" : ("marker" + nCssUsed);
        }

        $("#tblCell_" + startRowIdx + "_" + startColIdx).addClass("found");

        if (startRowIdx == endRowIdx) {
          for (var colIdx = startColIdx; colIdx <= endColIdx; colIdx++) {
            markCell("tblCell_" + startRowIdx + "_" + colIdx, word);
          }
          return;
        }

        if (startColIdx == endColIdx) {
          for (var rowIdx = startRowIdx; rowIdx <= endRowIdx; rowIdx++) {
            markCell("tblCell_" + rowIdx + "_" + startColIdx, word);
          }
          return;
        }

        for (var cellIdx = 0; cellIdx < endColIdx - startColIdx + 1; cellIdx++) {
          markCell("tblCell_" + (startRowIdx + cellIdx) + "_" + (startColIdx + cellIdx), word);
        }
      };

      var markCell = function (cellId, word) {
        if (!foundStrings[cellId]) {
          foundStrings[cellId] = {};
          $("#" + cellId).append('<div class="markers"></div>');
        }
        if (!foundStrings[cellId][word]) foundStrings[cellId][word] = {};
        $("#" + cellId + " .markers").append($("<div class='marker'></div>").addClass(stringToCss[word]));
      };

      var isProperMatch = function (candidate) {
        for (var i = 0; i < wordList.length; i++) {
          if (wordList[i] === candidate) return true;
        }
        return false;
      };

      var hideHint = function () { $("#hintPopup").hide(); };

      var getWordsToFind = function () {
        var indices = [];
        for (var i = 0; i < wordList.length; i++) indices.push(i);

        for (var i = indices.length - 1; i > 0; i--) {
          var j = Math.floor(Math.random() * (i + 1));
          var tmp = indices[i]; indices[i] = indices[j]; indices[j] = tmp;
        }

        var wordsToFind = [];
        for (var i = 0; i < N_WORDS_TO_FIND; i++) wordsToFind.push(wordList[indices[i]]);
        return wordsToFind;
      };

      var putWords = function (words) {
        var nWordsPut = 0;
        for (var i = 0; i < words.length; i++) if (putWord(words[i])) nWordsPut++;
        return nWordsPut;
      };

      var putWord = function (strWord) {
        var word = convertToArrayOfAksharas(strWord);
        var emptySlots = findEmptySlots();
        var attemptedSlots = [];

        while (attemptedSlots.length < emptySlots.length) {
          var remainingSlots = emptySlots.filter(s => attemptedSlots.indexOf(s) < 0);
          var slot = remainingSlots[Math.floor(Math.random() * remainingSlots.length)];
          attemptedSlots.push(slot);

          var slotRowIdx = parseInt(slot.split("_")[1]);
          var slotColIdx = parseInt(slot.split("_")[2]);

          var directionsRemaining = ["H", "V", "D"];

          nextDirection: while (directionsRemaining.length > 0) {
            var direction = directionsRemaining[Math.floor(Math.random() * directionsRemaining.length)];
            directionsRemaining.splice(directionsRemaining.indexOf(direction), 1);

            for (var wordIdx = 0; wordIdx < word.length; wordIdx++) {
              var charToPut = word[wordIdx];
              var targetCell;
              if (direction === "H") targetCell = "#tblCell_" + slotRowIdx + "_" + (slotColIdx + wordIdx);
              if (direction === "V") targetCell = "#tblCell_" + (slotRowIdx + wordIdx) + "_" + slotColIdx;
              if (direction === "D") targetCell = "#tblCell_" + (slotRowIdx + wordIdx) + "_" + (slotColIdx + wordIdx);

              if ($(targetCell).length == 0) break nextDirection;
              if ($(targetCell).text().trim().length == 0) continue;
              if ($(targetCell).text().trim() != charToPut) break nextDirection;
            }

            for (var wordIdx = 0; wordIdx < word.length; wordIdx++) {
              var charToPut = word[wordIdx];
              var targetCell;
              if (direction === "H") targetCell = "#tblCell_" + slotRowIdx + "_" + (slotColIdx + wordIdx);
              if (direction === "V") targetCell = "#tblCell_" + (slotRowIdx + wordIdx) + "_" + slotColIdx;
              if (direction === "D") targetCell = "#tblCell_" + (slotRowIdx + wordIdx) + "_" + (slotColIdx + wordIdx);

              $(targetCell).html("<span title='" + Sanscript.t(String(charToPut), 'devanagari', 'iast') + "'>" + charToPut + "</span>");
            }
            return true;
          }
        }
        return false;
      };

      var convertToArrayOfAksharas = function (strWord) {
        var aksharas = [];
        var currentAkshara = "";

        for (var charIdx = 0; charIdx < strWord.length; charIdx++) {
          var char = strWord[charIdx];

          if (fullSwaras.indexOf(char) >= 0) { currentAkshara += char; continue; }

          if (anuswara == char || visarga == char) {
            currentAkshara += char;
            aksharas.push(currentAkshara);
            currentAkshara = "";
            continue;
          }

          if (swaras.indexOf(char) >= 0) { currentAkshara += char; continue; }

          if (halant == char) { currentAkshara += char; continue; }

          if (vyanjanas.indexOf(char) >= 0) {
            if (currentAkshara.length > 0 && halant != currentAkshara[currentAkshara.length - 1]) {
              aksharas.push(currentAkshara);
              currentAkshara = "";
            }
            currentAkshara += char;
            continue;
          }

          if (currentAkshara.length > 0) { aksharas.push(currentAkshara); currentAkshara = ""; }
          aksharas.push(char);
        }

        if (currentAkshara.length > 0) aksharas.push(currentAkshara);
        return aksharas;
      };

      var findEmptySlots = function () {
        var emptySlots = [];
        $("#grid td").each(function (idx, cell) {
          if ($(cell).text().trim().length == 0) emptySlots.push($(cell).attr("id"));
        });
        return emptySlots;
      };

      var fillRandom = function () {
        $("#grid td").each(function (idx, cell) {
          if ($(cell).text().trim().length == 0) {
            var ra = getRandomAkshara();
            $(cell).html("<span title='" + Sanscript.t(String(ra), 'devanagari', 'itrans') + "'>" + ra + "</span>");
          }
        });
      };

      var fullSwaras = ["‡§Ö", "‡§Ü", "‡§á", "‡§à", "‡§â", "‡§ä", "‡§ã", "‡•†", "‡§è", "‡§ê", "‡§ì", "‡§î"];
      var swaras = ["\u093e", "\u093f", "\u0940", "\u0941", "\u0942", "\u0943", "\u0944", "\u0947", "\u0948", "\u094b", "\u094c"];
      var vyanjanas = ["‡§ï", "‡§ñ", "‡§ó", "‡§ò", "‡§ô", "‡§ö", "‡§õ", "‡§ú", "‡§ù", "‡§û", "‡§§", "‡§•", "‡§¶", "‡§ß", "‡§®", "‡§ü", "‡§†", "‡§°", "‡§¢", "‡§£", "‡§™", "‡§´", "‡§¨", "‡§≠", "‡§Æ", "‡§Ø", "‡§∞", "‡§≤", "‡§µ", "‡§∏", "‡§∂", "‡§∑", "‡§π", "‡§ï‡•ç‡§∑", "‡§ú‡•ç‡§û"];
      var halant = "\u094d";
      var anuswara = "\u0902";
      var visarga = "\u0903";

      var getRandomAkshara = function () {
        var numLetters = Math.floor(Math.random() * 2) + 1;
        if (numLetters == 1) {
          var rand = Math.floor(Math.random() * (fullSwaras.length + vyanjanas.length));
          return (rand >= fullSwaras.length) ? vyanjanas[rand - fullSwaras.length] : fullSwaras[rand];
        }

        var akshara = "";
        var lettersLeft = numLetters;
        while (lettersLeft > 1) {
          var rand = Math.floor(Math.random() * vyanjanas.length);
          if (akshara.length != 0) akshara += halant;
          akshara += vyanjanas[rand];
          lettersLeft--;
        }
        akshara += swaras[Math.floor(Math.random() * swaras.length)];
        if (Math.floor(Math.random() * 10) < 2) akshara += visarga;
        return akshara;
      };

      var resizeGrid = function () {
        var width = $(window).width();
        var height = $(window).height();
        var minDim = Math.min(width, height);
        $("#grid").width(minDim * 0.85);
        $("#grid").height(minDim * 0.85);
      };

      $(window).resize(resizeGrid);

      main();
    }

    function sV(obj) {
      obj.href += "&set=" + urlParams.get('set');
    }

    function showHint1() {
      $("#lead2").html("");
      for (var i = 0; i < wordList.length; i++) {
        $("#lead2").append("<span class=nob title='" + Sanscript.t(wordList[i], 'devanagari', 'iast') + "'>" + wordList[i] + " </span>");
      }
    }

    function showHint2() {
      $("#lead2").html("");
      for (var i = 0; i < wordList.length; i++) {
        if (answers.includes(wordList[i])) $("#lead2").append("<strong>" + wordList[i] + "</strong> ");
        else $("#lead2").append("<span class=nob title='" + Sanscript.t(wordList[i], 'devanagari', 'iast') + "'>" + wordList[i] + " </span>");
      }
    }
  </script>

  <!-- IMPORTANT: This is your Firestore score file -->
  <script type="module" src="./js/bp26-score.js"></script>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      if (window.bp26Init) {
        window.bp26Init({ game: BP26_GAME, day: BP26_DAY });
      }
    });
  </script>

  <!-- Auth Middleware-->
  <script type="module" src="/auth/api/middleware.js"></script>

</body>
</html>
